{"ast":null,"code":"import { profileAPI } from \"../Components/api/api\";\nimport { stopSubmit } from \"redux-form\";\nconst ADD_POST = 'ADD-POST';\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\nconst SET_STATUS = 'SET_STATUS';\nconst SAVE_PHOTO = 'SAVE_PHOTO';\nlet initialState = {\n  PostsData: [{\n    img: 'https://avatars.mds.yandex.net/get-pdb/1025945/86f10e6d-eab5-4572-8c07-c672b854d2a5/s1200?webp=false',\n    likeCount: 20,\n    user_name: 'Ivan Ivanov',\n    text: 'post 1 teeeext raznii'\n  }, {\n    img: 'https://avatars.mds.yandex.net/get-pdb/1667260/3ec2154a-cd3f-4c24-b13b-6c60951dd0b0/s1200',\n    likeCount: 30,\n    user_name: 'Vasilii Ivanov',\n    text: 'post 2 teeeext raznii'\n  }, {\n    img: 'https://i.livelib.ru/auface/471251/o/ab9f/Yurij_Belous.jpg',\n    likeCount: 10,\n    user_name: 'Petr Ivanov',\n    text: 'post 3 teeeext raznii'\n  }],\n  profile: null,\n  status: ''\n};\n\nconst profileReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_POST:\n      let body = action.postValue;\n      return { ...state,\n        PostsData: [{\n          img: 'https://i.livelib.ru/auface/471251/o/ab9f/Yurij_Belous.jpg',\n          likeCount: 0,\n          user_name: 'Petr Ivanov',\n          text: body\n        }, ...state.PostsData]\n      };\n\n    case SET_USER_PROFILE:\n      return { ...state,\n        profile: action.profile\n      };\n\n    case SET_STATUS:\n      return { ...state,\n        status: action.status\n      };\n\n    case SAVE_PHOTO:\n      return { ...state,\n        profile: { ...state.profile,\n          photos: action.photoFile\n        }\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const addPost = postValue => ({\n  type: ADD_POST,\n  postValue\n});\n\nconst setUserProfile = profile => ({\n  type: SET_USER_PROFILE,\n  profile\n});\n\nconst setStatus = status => ({\n  type: SET_STATUS,\n  status\n});\n\nconst setPhotoProfile = photoFile => ({\n  type: SAVE_PHOTO,\n  photoFile\n});\n\nexport const getProfile = userId => {\n  return async dispatch => {\n    let data = await profileAPI.getProfile(userId);\n    dispatch(setUserProfile(data));\n  };\n};\nexport const getStatus = userId => {\n  return async dispatch => {\n    let data = await profileAPI.getStatus(userId);\n    dispatch(setStatus(data));\n  };\n};\nexport const getUpdateStatus = status => {\n  return async dispatch => {\n    let response = await profileAPI.updateStatus(status);\n\n    if (response.data.resultCode == 0) {\n      dispatch(setStatus(status));\n    }\n  };\n};\nexport const savePhoto = file => async dispatch => {\n  let response = await profileAPI.savePhoto(file);\n\n  if (response.data.resultCode == 0) {\n    dispatch(setPhotoProfile(response.data.data.photos));\n  }\n};\nexport const saveProfile = profile => async (dispatch, getState) => {\n  const userId = getState().auth.id;\n  let response = await profileAPI.saveProfile(profile);\n\n  if (response.data.resultCode == 0) {\n    dispatch(getProfile(userId));\n  } else {\n    dispatch(stopSubmit('edit-profile', {\n      _error: response.data.messages[0]\n    }));\n    return Promise.reject(response.data.messages[0]);\n  }\n};\nexport default profileReducer;","map":{"version":3,"sources":["/Users/viktortursunkulov/Desktop/gitt/network/src/Redux/profile-reducer.ts"],"names":["profileAPI","stopSubmit","ADD_POST","SET_USER_PROFILE","SET_STATUS","SAVE_PHOTO","initialState","PostsData","img","likeCount","user_name","text","profile","status","profileReducer","state","action","type","body","postValue","photos","photoFile","addPost","setUserProfile","setStatus","setPhotoProfile","getProfile","userId","dispatch","data","getStatus","getUpdateStatus","response","updateStatus","resultCode","savePhoto","file","saveProfile","getState","auth","id","_error","messages","Promise","reject"],"mappings":"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","sourcesContent":["import { profileAPI } from \"../Components/api/api\";\nimport { stopSubmit } from \"redux-form\";\n\nconst ADD_POST = 'ADD-POST';\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\nconst SET_STATUS = 'SET_STATUS';\nconst SAVE_PHOTO = 'SAVE_PHOTO';\n\ntype PostType = {\n    img: string\n    likeCount: number\n    user_name: string\n    text: string\n}\n\ntype ContactsType = {\n    github: string\n    vk: string\n    facebook: string\n    instagram: string\n    twitter: string\n    website: string\n    youtube: string\n    mainLink: string\n}\ntype PhotosType = {\n    small: null | string\n    large: null | string\n}\n\n\ntype ProfileType = {\n    userId: number\n    lookingForAJob: boolean\n    lookingForAJobDescription: string\n    fullName: string\n    contacts: ContactsType\n    photos: PhotosType\n}\n\nlet initialState = {\n    PostsData: [\n        { img: 'https://avatars.mds.yandex.net/get-pdb/1025945/86f10e6d-eab5-4572-8c07-c672b854d2a5/s1200?webp=false', likeCount: 20, user_name: 'Ivan Ivanov', text: 'post 1 teeeext raznii' },\n        { img: 'https://avatars.mds.yandex.net/get-pdb/1667260/3ec2154a-cd3f-4c24-b13b-6c60951dd0b0/s1200', likeCount: 30, user_name: 'Vasilii Ivanov', text: 'post 2 teeeext raznii' },\n        { img: 'https://i.livelib.ru/auface/471251/o/ab9f/Yurij_Belous.jpg', likeCount: 10, user_name: 'Petr Ivanov', text: 'post 3 teeeext raznii' },\n    ] as Array<PostType>,\n    profile: null as ProfileType | null,\n    status: '',\n}\n\nexport type initialStateType = typeof initialState;\n\n\n\n\n\nconst profileReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case ADD_POST:\n            let body = action.postValue;\n            return {\n                ...state,\n                PostsData: [{\n                    img: 'https://i.livelib.ru/auface/471251/o/ab9f/Yurij_Belous.jpg',\n                    likeCount: 0,\n                    user_name: 'Petr Ivanov',\n                    text: body,\n                }, ...state.PostsData]\n            }\n        case SET_USER_PROFILE:\n            return {\n                ...state,\n                profile: action.profile\n            }\n        case SET_STATUS:\n            return { ...state, status: action.status }\n        case SAVE_PHOTO:\n            return { ...state, profile: { ...state.profile, photos: action.photoFile } }\n\n        default: return state;\n\n    }\n}\n\nexport const addPost = (postValue) => ({ type: ADD_POST, postValue });\nconst setUserProfile = (profile) => ({ type: SET_USER_PROFILE, profile });\nconst setStatus = status => ({ type: SET_STATUS, status });\nconst setPhotoProfile = photoFile => ({ type: SAVE_PHOTO, photoFile });\n\n\nexport const getProfile = (userId) => {\n    return async (dispatch) => {\n        let data = await profileAPI.getProfile(userId)\n        dispatch(setUserProfile(data))\n    }\n}\n\nexport const getStatus = (userId) => {\n    return async (dispatch) => {\n        let data = await profileAPI.getStatus(userId)\n        dispatch(setStatus(data))\n    }\n}\n\nexport const getUpdateStatus = (status) => {\n    return async (dispatch) => {\n        let response = await profileAPI.updateStatus(status)\n        if (response.data.resultCode == 0) {\n            dispatch(setStatus(status))\n        }\n    }\n}\nexport const savePhoto = (file) => async (dispatch) => {\n    let response = await profileAPI.savePhoto(file)\n    if (response.data.resultCode == 0) {\n        dispatch(setPhotoProfile(response.data.data.photos))\n    }\n}\nexport const saveProfile = (profile) => async (dispatch, getState) => {\n    const userId = getState().auth.id;\n    let response = await profileAPI.saveProfile(profile);\n    if (response.data.resultCode == 0) {\n        dispatch(getProfile(userId))\n    }\n    else {\n        dispatch(stopSubmit('edit-profile', { _error: response.data.messages[0] }));\n        return Promise.reject(response.data.messages[0])\n\n    }\n}\n\nexport default profileReducer;  "]},"metadata":{},"sourceType":"module"}