{"ast":null,"code":"import { profileAPI } from \"../Components/api/api\";\nimport { stopSubmit } from \"redux-form\";\nconst ADD_POST = 'ADD-POST';\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\nconst SET_STATUS = 'SET_STATUS';\nconst SAVE_PHOTO = 'SAVE_PHOTO';\nconst DELETE_POST = 'PROFILE-REDUCER/DELETE_POST';\nlet initialState = {\n  PostsData: [{\n    img: 'https://avatars.mds.yandex.net/get-pdb/1025945/86f10e6d-eab5-4572-8c07-c672b854d2a5/s1200?webp=false',\n    likeCount: 20,\n    user_name: 'Ivan Ivanov',\n    text: 'post 1 teeeext raznii',\n    postId: 0\n  }, {\n    img: 'https://avatars.mds.yandex.net/get-pdb/1667260/3ec2154a-cd3f-4c24-b13b-6c60951dd0b0/s1200',\n    likeCount: 30,\n    user_name: 'Vasilii Ivanov',\n    text: 'post 2 teeeext raznii',\n    postId: 1\n  }, {\n    img: 'https://i.livelib.ru/auface/471251/o/ab9f/Yurij_Belous.jpg',\n    likeCount: 10,\n    user_name: 'Petr Ivanov',\n    text: 'post 3 teeeext raznii',\n    postId: 2\n  }],\n  profile: null,\n  status: '',\n  text: ''\n};\n\nconst profileReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_POST:\n      return { ...state,\n        PostsData: [{\n          img: 'https://i.livelib.ru/auface/471251/o/ab9f/Yurij_Belous.jpg',\n          likeCount: 0,\n          user_name: 'Petr Ivanov',\n          text: action.postValue,\n          postId: 3\n        }, ...state.PostsData]\n      };\n\n    case SET_USER_PROFILE:\n      return { ...state,\n        profile: action.profile\n      };\n\n    case SET_STATUS:\n      return { ...state,\n        status: action.status\n      };\n\n    case SAVE_PHOTO:\n      return { ...state,\n        profile: { ...state.profile,\n          photos: action.photoFile\n        }\n      };\n\n    case DELETE_POST:\n      return { ...state,\n        PostsData: state.PostsData.filter(post => post.postId !== action.postId)\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const addPost = postValue => ({\n  type: ADD_POST,\n  postValue\n});\n\nconst setUserProfile = profile => ({\n  type: SET_USER_PROFILE,\n  profile\n});\n\nconst setStatus = status => ({\n  type: SET_STATUS,\n  status\n});\n\nexport const deletePost = postId => ({\n  type: DELETE_POST,\n  postId\n});\n\nconst setPhotoProfile = photoFile => ({\n  type: SAVE_PHOTO,\n  photoFile\n});\n\nexport const getProfile = userId => {\n  return async dispatch => {\n    let data = await profileAPI.getProfile(userId);\n    dispatch(setUserProfile(data));\n  };\n};\nexport const getStatus = userId => {\n  return async dispatch => {\n    let data = await profileAPI.getStatus(userId);\n    dispatch(setStatus(data));\n  };\n};\nexport const getUpdateStatus = status => {\n  return async dispatch => {\n    let response = await profileAPI.updateStatus(status);\n\n    if (response.data.resultCode == 0) {\n      dispatch(setStatus(status));\n    }\n  };\n};\nexport const savePhoto = file => async dispatch => {\n  let response = await profileAPI.savePhoto(file);\n\n  if (response.data.resultCode == 0) {\n    dispatch(setPhotoProfile(response.data.data.photos));\n  }\n};\nexport const saveProfile = profile => async (dispatch, getState) => {\n  const userId = getState().auth.id;\n  let response = await profileAPI.saveProfile(profile);\n\n  if (response.data.resultCode == 0) {\n    dispatch(getProfile(userId));\n  } else {\n    dispatch(stopSubmit('edit-profile', {\n      _error: response.data.messages[0]\n    }));\n    return Promise.reject(response.data.messages[0]);\n  }\n};\nexport default profileReducer;","map":{"version":3,"sources":["/Users/viktortursunkulov/Desktop/gitt/network/src/Redux/profile-reducer.ts"],"names":["profileAPI","stopSubmit","ADD_POST","SET_USER_PROFILE","SET_STATUS","SAVE_PHOTO","DELETE_POST","initialState","PostsData","img","likeCount","user_name","text","postId","profile","status","profileReducer","state","action","type","postValue","photos","photoFile","filter","post","addPost","setUserProfile","setStatus","deletePost","setPhotoProfile","getProfile","userId","dispatch","data","getStatus","getUpdateStatus","response","updateStatus","resultCode","savePhoto","file","saveProfile","getState","auth","id","_error","messages","Promise","reject"],"mappings":"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","sourcesContent":["import { profileAPI } from \"../Components/api/api\";\nimport { stopSubmit } from \"redux-form\";\n\nconst ADD_POST = 'ADD-POST';\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\nconst SET_STATUS = 'SET_STATUS';\nconst SAVE_PHOTO = 'SAVE_PHOTO';\nconst DELETE_POST = 'PROFILE-REDUCER/DELETE_POST'\n\ntype PostType = {\n    img: string\n    likeCount: number\n    user_name: string\n    text: string\n    postId: number\n}\n\ntype ContactsType = {\n    github: string\n    vk: string\n    facebook: string\n    instagram: string\n    twitter: string\n    website: string\n    youtube: string\n    mainLink: string\n}\ntype PhotosType = {\n    small: null | string\n    large: null | string\n}\n\n\ntype ProfileType = {\n    userId: number\n    lookingForAJob: boolean\n    lookingForAJobDescription: string\n    fullName: string\n    contacts: ContactsType\n    photos: PhotosType\n}\n\nlet initialState = {\n    PostsData: [\n        { img: 'https://avatars.mds.yandex.net/get-pdb/1025945/86f10e6d-eab5-4572-8c07-c672b854d2a5/s1200?webp=false', likeCount: 20, user_name: 'Ivan Ivanov', text: 'post 1 teeeext raznii', postId:0 },\n        { img: 'https://avatars.mds.yandex.net/get-pdb/1667260/3ec2154a-cd3f-4c24-b13b-6c60951dd0b0/s1200', likeCount: 30, user_name: 'Vasilii Ivanov', text: 'post 2 teeeext raznii', postId:1 },\n        { img: 'https://i.livelib.ru/auface/471251/o/ab9f/Yurij_Belous.jpg', likeCount: 10, user_name: 'Petr Ivanov', text: 'post 3 teeeext raznii', postId:2 },\n    ] as Array<PostType>,\n    profile: null as ProfileType | null,\n    status: '',\n    text: '',\n\n}\n\nexport type initialStateType = typeof initialState;\n\n\n\n\n\nconst profileReducer = (state = initialState, action: any): initialStateType => {\n    switch (action.type) {\n        case ADD_POST:\n            return {\n                ...state,\n                PostsData: [{\n                    img: 'https://i.livelib.ru/auface/471251/o/ab9f/Yurij_Belous.jpg',\n                    likeCount: 0,\n                    user_name: 'Petr Ivanov',\n                    text: action.postValue,\n                    postId: 3,\n                }, ...state.PostsData]\n            }\n        case SET_USER_PROFILE:\n            return {\n                ...state,\n                profile: action.profile\n            }\n        case SET_STATUS:\n            return { ...state, status: action.status }\n        case SAVE_PHOTO:\n            return {\n                ...state, profile: { ...state.profile, photos: action.photoFile } as ProfileType\n            }\n        case DELETE_POST: \n        return {\n            ...state, \n            PostsData: state.PostsData.filter(post => post.postId !== action.postId)\n        }\n\n        default: return state;\n\n    }\n}\n\ntype AddPostActionType = {\n    type: typeof ADD_POST\n    postValue: string\n}\nexport const addPost = (postValue: string): AddPostActionType => ({ type: ADD_POST, postValue });\ntype SetUserProfileActionType = {\n    type: typeof SET_USER_PROFILE\n    profile: ProfileType\n}\nconst setUserProfile = (profile: ProfileType): SetUserProfileActionType => ({ type: SET_USER_PROFILE, profile });\ntype SetStatusActionType = {\n    type: typeof SET_STATUS\n    status: string\n}\nconst setStatus = (status: string): SetStatusActionType => ({ type: SET_STATUS, status });\ntype DeletePostActionType = {\n    type: typeof DELETE_POST\n    postId: number\n}\nexport const deletePost = (postId: number): DeletePostActionType => ({ type: DELETE_POST, postId })\ntype SetPhotoProfileActionType = {\n    type: typeof SAVE_PHOTO\n    photoFile: PhotosType\n}\nconst setPhotoProfile = (photoFile: PhotosType): SetPhotoProfileActionType => ({ type: SAVE_PHOTO, photoFile });\n\n\nexport const getProfile = (userId: number) => {\n    return async (dispatch: any) => {\n        let data = await profileAPI.getProfile(userId)\n        dispatch(setUserProfile(data))\n    }\n}\n\nexport const getStatus = (userId: number) => {\n    return async (dispatch: any) => {\n        let data = await profileAPI.getStatus(userId)\n        dispatch(setStatus(data))\n    }\n}\n\nexport const getUpdateStatus = (status: string) => {\n    return async (dispatch: any) => {\n        let response = await profileAPI.updateStatus(status)\n        if (response.data.resultCode == 0) {\n            dispatch(setStatus(status))\n        }\n    }\n}\nexport const savePhoto = (file: any) => async (dispatch: any) => {\n    let response = await profileAPI.savePhoto(file)\n    if (response.data.resultCode == 0) {\n        dispatch(setPhotoProfile(response.data.data.photos))\n    }\n}\nexport const saveProfile = (profile: ProfileType) => async (dispatch: any, getState: any) => {\n    const userId = getState().auth.id;\n    let response = await profileAPI.saveProfile(profile);\n    if (response.data.resultCode == 0) {\n        dispatch(getProfile(userId))\n    }\n    else {\n        dispatch(stopSubmit('edit-profile', { _error: response.data.messages[0] }));\n        return Promise.reject(response.data.messages[0])\n\n    }\n}\n\nexport default profileReducer;  "]},"metadata":{},"sourceType":"module"}